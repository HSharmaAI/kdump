# Generated by Ansible
# SLES kdump configuration

# Basic configuration
KDUMP_SAVEDIR="{{ kdump_target.path | default('/var/crash') }}"
KDUMP_DUMPFORMAT="compressed"
KDUMP_DUMPLEVEL=31
KDUMP_IMMEDIATE_REBOOT="{{ 'yes' if kdump_system_action == 'reboot' else 'no' }}"

# Core collector configuration
{% if kdump_core_collector is defined %}
KDUMP_CORE_COLLECTOR="{{ kdump_core_collector }}"
{% endif %}

# Default action
KDUMP_DEFAULT="{{ kdump_sles_config.default | default(__kdump_sles_defaults.default) }}"

# Force rebuild
KDUMP_FORCE_REBUILD="{{ kdump_sles_config.force_rebuild | default(__kdump_sles_defaults.force_rebuild) }}"

# Pre and post scripts
KDUMP_POST="{{ kdump_sles_config.kdump_post | default(__kdump_sles_defaults.kdump_post) }}"
KDUMP_PRE="{{ kdump_sles_config.kdump_pre | default(__kdump_sles_defaults.kdump_pre) }}"

# Additional binaries and modules
KDUMP_EXTRA_BINS="{{ kdump_sles_config.extra_bins | default(__kdump_sles_defaults.extra_bins) }}"
KDUMP_EXTRA_MODULES="{{ kdump_sles_config.extra_modules | default(__kdump_sles_defaults.extra_modules) }}"

# Kernel and initrd versions
KDUMP_KERNEL_VER="{{ kdump_sles_config.kdump_kernel_ver | default(__kdump_sles_defaults.kdump_kernel_ver) }}"
KDUMP_INITRD_VER="{{ kdump_sles_config.kdump_initrd_ver | default(__kdump_sles_defaults.kdump_initrd_ver) }}"

# SSH configuration
{% if kdump_target.type is defined and kdump_target.type == 'ssh' %}
KDUMP_SSH_USER="{{ kdump_ssh_user }}"
KDUMP_SSH_SERVER="{{ kdump_ssh_server }}"
KDUMP_SSH_KEY="{{ kdump_sshkey }}"
{% endif %}

# Additional dracut arguments
{% if kdump_dracut_args is defined %}
KDUMP_DRACUT_ARGS="{{ kdump_dracut_args }}"
{% endif %} 